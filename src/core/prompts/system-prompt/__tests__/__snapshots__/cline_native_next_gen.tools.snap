[
  {
    "type": "function",
    "function": {
      "name": "ask_followup_question",
      "description": "Ask user a question for clarifying or gathering information needed to complete the task. For example, ask the user clarifying questions about a key implementation decision. You should only ask one question.",
      "strict": false,
      "parameters": {
        "type": "object",
        "properties": {
          "question": {
            "type": "string",
            "description": "The single question to ask the user. E.g. \"How can I help you?\""
          },
          "options": {
            "type": "string",
            "description": "An array of 2-5 options (e.x: \"[\"Option 1\", \"Option 2\", \"Option 3\"]\") for the user to choose from. Each option should be a string describing a possible answer to the single question. You may not always need to provide options, but it may be helpful in many cases where it can save the user from having to type out a response manually. IMPORTANT: NEVER include an option to toggle to Act mode, as this would be something you need to direct the user to do manually themselves if needed."
          },
          "task_progress": {
            "type": "string",
            "description": "A checklist showing task progress after this tool use is completed. The task_progress parameter must be included as a separate parameter inside of the parent tool call, it must be separate from other parameters such as content, arguments, etc. (See 'UPDATING TASK PROGRESS' section for more details)"
          }
        },
        "required": [
          "question",
          "options"
        ],
        "additionalProperties": false
      }
    }
  },
  {
    "type": "function",
    "function": {
      "name": "execute_command",
      "description": "Request to execute a CLI command on the system. Use this when you need to perform system operations or run specific commands to accomplish any step in the user's task.",
      "strict": false,
      "parameters": {
        "type": "object",
        "properties": {
          "command": {
            "type": "string",
            "description": "The CLI command to execute. This should be valid for the current operating system. Do not use the ~ character or $HOME to refer to the home directory. Always use absolute paths. The command will be executed from the current workspace, you do not need to cd to the workspace."
          },
          "requires_approval": {
            "type": "boolean",
            "description": "To indicate whether this command requires explicit user approval or interaction before it should be executed. For system/file altering operations like installing/uninstalling packages, removing/overwriting files, system configuration changes, network operations, or any commands that are considered potentially dangerous must be set to true. False for safe operations like running development servers, building projects, and other non-destructive operations."
          }
        },
        "required": [
          "command",
          "requires_approval"
        ],
        "additionalProperties": false
      }
    }
  },
  {
    "type": "function",
    "function": {
      "name": "read_file",
      "description": "Request to read the contents of a file at the specified path. Use this when you need to examine the contents of an existing file you do not know the contents of, for example to analyze code, review text files, or extract information from configuration files. Automatically extracts raw text from PDF and DOCX files. May not be suitable for other types of binary files, as it returns the raw content as a string. Do NOT use this tool to list the contents of a directory. Only use this tool on files.",
      "strict": false,
      "parameters": {
        "type": "object",
        "properties": {
          "path": {
            "type": "string",
            "description": "The path of the file to read (relative to the current working directory {{CWD}}){{MULTI_ROOT_HINT}}"
          },
          "task_progress": {
            "type": "string",
            "description": "A checklist showing task progress after this tool use is completed. The task_progress parameter must be included as a separate parameter inside of the parent tool call, it must be separate from other parameters such as content, arguments, etc. (See 'UPDATING TASK PROGRESS' section for more details)"
          }
        },
        "required": [
          "path"
        ],
        "additionalProperties": false
      }
    }
  },
  {
    "type": "function",
    "function": {
      "name": "write_to_file",
      "description": "[IMPORTANT: Always output the absolutePath first] Request to write content to a file at the specified path. If the file exists, it will be overwritten with the provided content. If the file doesn't exist, it will be created. This tool will automatically create any directories needed to write the file.",
      "strict": false,
      "parameters": {
        "type": "object",
        "properties": {
          "absolutePath": {
            "type": "string",
            "description": "The absolute path to the file to write to."
          },
          "content": {
            "type": "string",
            "description": "After providing the path so a file can be created, then use this to provide the content to write to the file."
          },
          "task_progress": {
            "type": "string",
            "description": "A checklist showing task progress after this tool use is completed. The task_progress parameter must be included as a separate parameter inside of the parent tool call, it must be separate from other parameters such as content, arguments, etc. (See 'UPDATING TASK PROGRESS' section for more details)"
          }
        },
        "required": [
          "absolutePath",
          "content"
        ],
        "additionalProperties": false
      }
    }
  },
  {
    "type": "function",
    "function": {
      "name": "replace_in_file",
      "description": "[IMPORTANT: Always output the absolutePath first] Request to replace sections of content in an existing file using SEARCH/REPLACE blocks that define exact changes to specific parts of the file. This tool should be used when you need to make targeted changes to specific parts of a file.",
      "strict": false,
      "parameters": {
        "type": "object",
        "properties": {
          "absolutePath": {
            "type": "string",
            "description": "The absolute path to the file to write to."
          },
          "diff": {
            "type": "string",
            "description": "One or more SEARCH/REPLACE blocks following this exact format:\n  ```\n  ------- SEARCH\n  [exact content to find]\n  =======\n  [new content to replace with]\n  +++++++ REPLACE\n  ```\n  Critical rules:\n  1. SEARCH content must match the associated file section to find EXACTLY:\n\t * Match character-for-character including whitespace, indentation, line endings\n\t * Include all comments, docstrings, etc.\n  2. SEARCH/REPLACE blocks will ONLY replace the first match occurrence.\n\t * Including multiple unique SEARCH/REPLACE blocks if you need to make multiple changes.\n\t * Include *just* enough lines in each SEARCH section to uniquely match each set of lines that need to change.\n\t * When using multiple SEARCH/REPLACE blocks, list them in the order they appear in the file.\n  3. Keep SEARCH/REPLACE blocks concise:\n\t * Break large SEARCH/REPLACE blocks into a series of smaller blocks that each change a small portion of the file.\n\t * Include just the changing lines, and a few surrounding lines if needed for uniqueness.\n\t * Do not include long runs of unchanging lines in SEARCH/REPLACE blocks.\n\t * Each line must be complete. Never truncate lines mid-way through as this can cause matching failures.\n  4. Special operations:\n\t * To move code: Use two SEARCH/REPLACE blocks (one to delete from original + one to insert at new location)\n\t * To delete code: Use empty REPLACE section"
          },
          "task_progress": {
            "type": "string",
            "description": "A checklist showing task progress after this tool use is completed. The task_progress parameter must be included as a separate parameter inside of the parent tool call, it must be separate from other parameters such as content, arguments, etc. (See 'UPDATING TASK PROGRESS' section for more details)"
          }
        },
        "required": [
          "absolutePath",
          "diff"
        ],
        "additionalProperties": false
      }
    }
  },
  {
    "type": "function",
    "function": {
      "name": "search_files",
      "description": "Request to perform a regex search across files in a specified directory, providing context-rich results. This tool searches for patterns or specific content across multiple files, displaying each match with encapsulating context.",
      "strict": false,
      "parameters": {
        "type": "object",
        "properties": {
          "path": {
            "type": "string",
            "description": "The path of the directory to search in (relative to the current working directory {{CWD}}){{MULTI_ROOT_HINT}}. This directory will be recursively searched."
          },
          "regex": {
            "type": "string",
            "description": "The regular expression pattern to search for. Uses Rust regex syntax."
          },
          "file_pattern": {
            "type": "string",
            "description": "Glob pattern to filter files (e.g., '*.ts' for TypeScript files). If not provided, it will search all files (*)."
          },
          "task_progress": {
            "type": "string",
            "description": "A checklist showing task progress after this tool use is completed. The task_progress parameter must be included as a separate parameter inside of the parent tool call, it must be separate from other parameters such as content, arguments, etc. (See 'UPDATING TASK PROGRESS' section for more details)"
          }
        },
        "required": [
          "path",
          "regex"
        ],
        "additionalProperties": false
      }
    }
  },
  {
    "type": "function",
    "function": {
      "name": "list_files",
      "description": "Request to list files and directories within the specified directory. If recursive is true, it will list all files and directories recursively. If recursive is false or not provided, it will only list the top-level contents. Do not use this tool to confirm the existence of files you may have created, as the user will let you know if the files were created successfully or not.",
      "strict": false,
      "parameters": {
        "type": "object",
        "properties": {
          "path": {
            "type": "string",
            "description": "The path of the directory to list contents for."
          },
          "recursive": {
            "type": "boolean",
            "description": "Whether to list files recursively. Use true for recursive listing, false or omit for top-level only."
          },
          "task_progress": {
            "type": "string",
            "description": "A checklist showing task progress after this tool use is completed. The task_progress parameter must be included as a separate parameter inside of the parent tool call, it must be separate from other parameters such as content, arguments, etc. (See 'UPDATING TASK PROGRESS' section for more details)"
          }
        },
        "required": [
          "path"
        ],
        "additionalProperties": false
      }
    }
  },
  {
    "type": "function",
    "function": {
      "name": "list_code_definition_names",
      "description": "Request to list definition names (classes, functions, methods, etc.) used in source code files at the top level of the specified directory. This tool provides insights into the codebase structure and important constructs, encapsulating high-level concepts and relationships that are crucial for understanding the overall architecture.",
      "strict": false,
      "parameters": {
        "type": "object",
        "properties": {
          "path": {
            "type": "string",
            "description": "The path of the directory (relative to the current working directory {{CWD}}){{MULTI_ROOT_HINT}} to list top level source code definitions for."
          },
          "task_progress": {
            "type": "string",
            "description": "A checklist showing task progress after this tool use is completed. The task_progress parameter must be included as a separate parameter inside of the parent tool call, it must be separate from other parameters such as content, arguments, etc. (See 'UPDATING TASK PROGRESS' section for more details)"
          }
        },
        "required": [
          "path"
        ],
        "additionalProperties": false
      }
    }
  },
  {
    "type": "function",
    "function": {
      "name": "browser_action",
      "description": "Request to interact with a Puppeteer-controlled browser. Every action, except `close`, will be responded to with a screenshot of the browser's current state, along with any new console logs. You may only perform one browser action per message, and wait for the user's response including a screenshot and logs to determine the next action.\n- The sequence of actions **must always start with** launching the browser at a URL, and **must always end with** closing the browser. If you need to visit a new URL that is not possible to navigate to from the current webpage, you must first close the browser, then launch again at the new URL.\n- While the browser is active, only the `browser_action` tool can be used. No other tools should be called during this time. You may proceed to use other tools only after closing the browser. For example if you run into an error and need to fix a file, you must close the browser, then use other tools to make the necessary changes, then re-launch the browser to verify the result.\n- The browser window has a resolution of **1280x720** pixels. When performing any click actions, ensure the coordinates are within this resolution range.\n- Before clicking on any elements such as icons, links, or buttons, you must consult the provided screenshot of the page to determine the coordinates of the element. The click should be targeted at the **center of the element**, not on its edges.",
      "strict": false,
      "parameters": {
        "type": "object",
        "properties": {
          "action": {
            "type": "string",
            "description": "The action to perform. The available actions are: \n\t* launch: Launch a new Puppeteer-controlled browser instance at the specified URL. This **must always be the first action**. \n\t\t- Use with the `url` parameter to provide the URL. \n\t\t- Ensure the URL is valid and includes the appropriate protocol (e.g. http://localhost:3000/page, file:///path/to/file.html, etc.) \n\t* click: Click at a specific x,y coordinate. \n\t\t- Use with the `coordinate` parameter to specify the location. \n\t\t- Always click in the center of an element (icon, button, link, etc.) based on coordinates derived from a screenshot. \n\t* type: Type a string of text on the keyboard. You might use this after clicking on a text field to input text. \n\t\t- Use with the `text` parameter to provide the string to type. \n\t* scroll_down: Scroll down the page by one page height. \n\t* scroll_up: Scroll up the page by one page height. \n\t* close: Close the Puppeteer-controlled browser instance. This **must always be the final browser action**. \n\t    - Example: 'scroll_up'"
          },
          "url": {
            "type": "string",
            "description": "Use this for providing the URL for the `launch` action."
          },
          "coordinate": {
            "type": "string",
            "description": "x,y coordinates - The X and Y coordinates for the `click` action. Coordinates should be within the **1280x720** resolution. Example: '450,300'"
          },
          "text": {
            "type": "string",
            "description": "Use this for providing the text for the `type` action. Example: 'Hello, world!'"
          }
        },
        "required": [
          "action"
        ],
        "additionalProperties": false
      }
    }
  },
  {
    "type": "function",
    "function": {
      "name": "web_fetch",
      "description": "Fetches and analyzes content from a specified URL. IMPORTANT: If an MCP-provided web fetch tool is available, prefer using that tool instead of this one, as it may have fewer restrictions.",
      "strict": false,
      "parameters": {
        "type": "object",
        "properties": {
          "url": {
            "type": "string",
            "description": "The URL to fetch content from"
          },
          "prompt": {
            "type": "string",
            "description": "Prompt for analyzing the webpage content"
          },
          "task_progress": {
            "type": "string",
            "description": "A checklist showing task progress after this tool use is completed. The task_progress parameter must be included as a separate parameter inside of the parent tool call, it must be separate from other parameters such as content, arguments, etc. (See 'UPDATING TASK PROGRESS' section for more details)"
          }
        },
        "required": [
          "url",
          "prompt"
        ],
        "additionalProperties": false
      }
    }
  },
  {
    "type": "function",
    "function": {
      "name": "web_search",
      "description": "Performs a web search and returns relevant results with titles and URLs. IMPORTANT: If an MCP-provided web search tool is available, prefer using that tool instead of this one, as it may have fewer restrictions.",
      "strict": false,
      "parameters": {
        "type": "object",
        "properties": {
          "query": {
            "type": "string",
            "description": "The search query to use"
          },
          "allowed_domains": {
            "type": "string",
            "description": "JSON array of domains to restrict results to"
          },
          "blocked_domains": {
            "type": "string",
            "description": "JSON array of domains to exclude from results"
          },
          "task_progress": {
            "type": "string",
            "description": "A checklist showing task progress after this tool use is completed. The task_progress parameter must be included as a separate parameter inside of the parent tool call, it must be separate from other parameters such as content, arguments, etc. (See 'UPDATING TASK PROGRESS' section for more details)"
          }
        },
        "required": [
          "query"
        ],
        "additionalProperties": false
      }
    }
  },
  {
    "type": "function",
    "function": {
      "name": "access_mcp_resource",
      "description": "Request to access a resource provided by a connected MCP server. Resources represent data sources that can be used as context, such as files, API responses, or system information. You must only use this tool if you have been informed of the MCP server and the resource you are trying to access.",
      "strict": false,
      "parameters": {
        "type": "object",
        "properties": {
          "server_name": {
            "type": "string",
            "description": "The name of the MCP server providing the resource"
          },
          "uri": {
            "type": "string",
            "description": "The URI identifying the specific resource to access"
          },
          "task_progress": {
            "type": "string",
            "description": "A checklist showing task progress after this tool use is completed. The task_progress parameter must be included as a separate parameter inside of the parent tool call, it must be separate from other parameters such as content, arguments, etc. (See 'UPDATING TASK PROGRESS' section for more details)"
          }
        },
        "required": [
          "server_name",
          "uri"
        ],
        "additionalProperties": false
      }
    }
  },
  {
    "type": "function",
    "function": {
      "name": "attempt_completion",
      "description": "Once you've completed the user's task, use this tool to present the final result to the user, including a brief and very short (1-2 paragraph) summary of the task and what was done to resolve it. Provide the basics, hitting the highlights, but do delve into the specifics. You should only call this tool when you have completed all tasks in the task_progress list, and completed all changes that are necessary to satisfy the user's request. You should not provide the contents of the task_progress list in the result parameter, it must be included in the task_progress parameter.",
      "strict": false,
      "parameters": {
        "type": "object",
        "properties": {
          "result": {
            "type": "string",
            "description": "A clear, brief and very short (1-2 paragraph) summary of the final result of the task."
          },
          "command": {
            "type": "string",
            "description": "An actionable terminal command that is non-verbose that allows user to review the result of your work. For example, use `start localhost:3000` to start a locally running development server. Commands like `echo` or `cat` that merely print text or open a file are not allowed. Ensure the command is properly formatted for user's OS and does not contain any harmful instructions"
          },
          "task_progress": {
            "type": "string",
            "description": "A checklist showing task progress with the latest status of each subtasks included previously, if any. If you are calling attempt completion, and all items in this list have been completed, they must be marked as completed in this response."
          }
        },
        "required": [
          "result"
        ],
        "additionalProperties": false
      }
    }
  },
  {
    "type": "function",
    "function": {
      "name": "plan_mode_respond",
      "description": "Respond to the user's inquiry in an effort to plan a solution to the user's task. This tool should ONLY be used when you have already explored the relevant files and are ready to present a concrete plan. DO NOT use this tool to announce what files you're going to read - just read them first. This tool is only available in PLAN MODE. The environment_details will specify the current mode; if it is not PLAN_MODE then you should not use this tool.\nHowever, if while writing your response you realize you actually need to do more exploration before providing a complete plan, you can add the optional needs_more_exploration parameter to indicate this. This allows you to acknowledge that you should have done more exploration first, and signals that your next message will use exploration tools instead.",
      "strict": false,
      "parameters": {
        "type": "object",
        "properties": {
          "response": {
            "type": "string",
            "description": "The response to provide to the user."
          },
          "task_progress": {
            "type": "string",
            "description": "A checklist showing task progress with the latest status of each subtasks included previously if any."
          }
        },
        "required": [
          "response"
        ],
        "additionalProperties": false
      }
    }
  },
  {
    "type": "function",
    "function": {
      "name": "load_mcp_documentation",
      "description": "Load documentation about creating MCP servers. This tool should be used when the user requests to create or install an MCP server (the user may ask you something along the lines of \"add a tool\" that does some function, in other words to create an MCP server that provides tools and resources that may connect to external APIs for example. You have the ability to create an MCP server and add it to a configuration file that will then expose the tools and resources for you to use with `use_mcp_tool` and `access_mcp_resource`). The documentation provides detailed information about the MCP server creation process, including setup instructions, best practices, and examples.",
      "strict": false,
      "parameters": {
        "type": "object",
        "properties": {},
        "required": [],
        "additionalProperties": false
      }
    }
  },
  {
    "type": "function",
    "function": {
      "name": "focus_chain",
      "description": "",
      "strict": false,
      "parameters": {
        "type": "object",
        "properties": {},
        "required": [],
        "additionalProperties": false
      }
    }
  },
  {
    "type": "function",
    "function": {
      "name": "generate_explanation",
      "description": "Opens a multi-file diff view and generates AI-powered inline comments explaining the changes between two git references. Use this tool to help users understand code changes from git commits, pull requests, branches, or any git refs. The tool uses git to retrieve file contents and displays a side-by-side diff view with explanatory comments.",
      "strict": false,
      "parameters": {
        "type": "object",
        "properties": {
          "title": {
            "type": "string",
            "description": "A descriptive title for the diff view (e.g., 'Changes in commit abc123', 'PR #42: Add authentication', 'Changes between main and feature-branch')"
          },
          "from_ref": {
            "type": "string",
            "description": "The git reference for the 'before' state. Can be a commit hash, branch name, tag, or relative reference like HEAD~1, HEAD^, origin/main, etc."
          },
          "to_ref": {
            "type": "string",
            "description": "The git reference for the 'after' state. Can be a commit hash, branch name, tag, or relative reference. If not provided, compares to the current working directory (including uncommitted changes)."
          }
        },
        "required": [
          "title",
          "from_ref"
        ],
        "additionalProperties": false
      }
    }
  },
  {
    "type": "function",
    "function": {
      "name": "sentinel_qa_report",
      "description": "Generate and display a Sentinel QA test report. Use this tool ONLY after:\n1. Completing all test execution\n2. Cleaning up ALL injected SENTINEL_TEST_LOG statements\n\n**IMPORTANT**: You MUST cleanup injected logs BEFORE calling this tool. Do NOT leave test logs in the code!",
      "strict": false,
      "parameters": {
        "type": "object",
        "properties": {
          "report_json": {
            "type": "string",
            "description": "The complete test report as a JSON string. Must follow this schema:\n{\n  \"summary\": {\n    \"total_tests\": number,\n    \"passed\": number,\n    \"failed\": number,\n    \"skipped\": number,\n    \"verdict\": \"MERGEABLE\" | \"NOT_MERGEABLE\" | \"MERGEABLE_WITH_RISKS\"\n  },\n  \"tests\": [\n    {\n      \"id\": \"string\",\n      \"name\": \"string\",\n      \"category\": \"functional\" | \"edge_case\" | \"integration\" | \"ui_ux\",\n      \"status\": \"passed\" | \"failed\" | \"skipped\",\n      \"evidence\": {\n        \"logs\": [\"captured log lines\"],\n        \"screenshots\": [\"screenshot descriptions\"],\n        \"notes\": \"additional observations\"\n      },\n      \"failure_reason\": \"string (if failed)\"\n    }\n  ],\n  \"risks\": [\"identified risks or concerns\"],\n  \"recommendations\": [\"suggested improvements\"]\n}"
          },
          "logs_cleanup_summary": {
            "type": "string",
            "description": "Summary of log cleanup performed. If you injected any SENTINEL_TEST_LOG statements, you MUST provide this to confirm cleanup was done.\n\nFormat: \"Removed N logs from M files: file1.ts (lines X,Y), file2.ts (line Z)\" or \"No logs were injected\" if no logs were added.\n\nIf logs were injected but this field is empty, you have NOT completed the cleanup phase!"
          }
        },
        "required": [
          "report_json"
        ],
        "additionalProperties": false
      }
    }
  },
  {
    "type": "function",
    "function": {
      "name": "sentinel_detect_changes",
      "description": "Detect and analyze code changes for Sentinel QA testing. This tool identifies files that have been modified based on the specified source (uncommitted changes, PR, or specific files) and prepares them for testing.\n\nUse this tool as the FIRST step in a Sentinel QA workflow to:\n1. Detect which files have changed\n2. Get the diff content for analysis\n3. Allow the user to confirm the test scope before proceeding\n\nThe tool will return a structured summary of changes that can be used to generate a test plan.",
      "strict": false,
      "parameters": {
        "type": "object",
        "properties": {
          "source": {
            "type": "string",
            "description": "The source of changes to detect. Must be one of:\n- \"uncommitted\": Detect uncommitted changes in the workspace using git diff\n- \"pr\": Detect changes from a Pull Request (requires pr_identifier)\n- \"files\": Use specific files provided by the user"
          },
          "pr_identifier": {
            "type": "string",
            "description": "Required when source is \"pr\". The PR number or URL to analyze.\nExamples: \"123\", \"#123\", \"https://github.com/owner/repo/pull/123\""
          },
          "file_paths": {
            "type": "string",
            "description": "Required when source is \"files\". A JSON array of file paths to test.\nExample: [\"src/auth/login.ts\", \"src/components/LoginForm.tsx\"]"
          },
          "prd_description": {
            "type": "string",
            "description": "Optional PRD or feature description provided by the user. This context helps understand what the changes are supposed to do."
          }
        },
        "required": [
          "source"
        ],
        "additionalProperties": false
      }
    }
  },
  {
    "type": "function",
    "function": {
      "name": "sentinel_generate_plan",
      "description": "Generate a comprehensive test plan for Sentinel QA testing. This is a two-step process:\n\n**Step 1 (without test_cases):** Call this tool with changed_files to get instructions for generating test cases. You should:\n1. Read the changed files to understand the code\n2. Analyze the functionality and identify testable scenarios\n3. Generate comprehensive test cases based on your analysis\n\n**Step 2 (with test_cases):** Call this tool again with your AI-generated test cases as JSON. The tool will:\n1. Create a test plan markdown file with mermaid diagram\n2. Save it for user review\n3. Allow the user to modify before execution\n\nUse this tool AFTER sentinel_detect_changes has confirmed the test scope.",
      "strict": false,
      "parameters": {
        "type": "object",
        "properties": {
          "changed_files": {
            "type": "string",
            "description": "A JSON array of file paths that were detected for testing. This should come from the sentinel_detect_changes result.\nExample: [\"src/auth/login.ts\", \"src/components/LoginForm.tsx\"]"
          },
          "test_cases": {
            "type": "string",
            "description": "A JSON array of test cases YOU generate after analyzing the code. Each test case must have:\n- id: Unique identifier (e.g., \"TC001\")\n- name: Short descriptive name\n- category: One of \"functional\", \"edge_case\", \"error_handling\", \"ui_ux\"\n- description: What the test verifies\n- steps: Array of test steps\n- expectedResult: What should happen if test passes\n- priority: \"high\", \"medium\", or \"low\"\n\nGenerate 5-10 meaningful test cases based on actual code analysis. Do NOT use generic templates.\n\nExample:\n[\n  {\n    \"id\": \"TC001\",\n    \"name\": \"Login with valid credentials\",\n    \"category\": \"functional\",\n    \"description\": \"Verify user can login with correct email and password\",\n    \"steps\": [\"Navigate to /login\", \"Enter 'test@example.com'\", \"Enter 'password123'\", \"Click Login button\"],\n    \"expectedResult\": \"User sees welcome message and is redirected to /dashboard\",\n    \"priority\": \"high\"\n  }\n]"
          },
          "prd_description": {
            "type": "string",
            "description": "The PRD or feature description that explains what the code should do. This helps generate more accurate and relevant test cases."
          },
          "code_analysis": {
            "type": "string",
            "description": "Optional code analysis or context gathered from reading the changed files. Include relevant function signatures, component structures, or business logic that should be tested."
          },
          "diff_content": {
            "type": "string",
            "description": "Optional diff content showing the actual changes. This helps understand what specifically changed and needs testing."
          }
        },
        "required": [
          "changed_files"
        ],
        "additionalProperties": false
      }
    }
  },
  {
    "type": "function",
    "function": {
      "name": "sentinel_analyze_code",
      "description": "Analyze code structure and search for patterns in the specified files for Sentinel QA testing. This tool combines AST-based code structure analysis with regex pattern search to help understand the code before generating test cases.\n\nUse this tool AFTER sentinel_detect_changes to deeply analyze the changed files before calling sentinel_generate_plan.\n\nThe tool provides:\n1. **Code Structure Analysis**: Extracts class, function, method, and interface definitions using AST parsing\n2. **Pattern Search**: Finds specific code patterns using regex (e.g., error handling, validation, API calls)\n3. **Summary**: Provides a concise overview of the analyzed code\n\nOutput is automatically truncated to prevent context overflow (max 100KB).",
      "strict": false,
      "parameters": {
        "type": "object",
        "properties": {
          "file_paths": {
            "type": "string",
            "description": "A JSON array of file paths to analyze. These should be the files detected by sentinel_detect_changes.\nExample: [\"src/auth/login.ts\", \"src/components/LoginForm.tsx\"]\nMaximum 20 files will be analyzed."
          },
          "analysis_type": {
            "type": "string",
            "description": "The type of analysis to perform. Must be one of:\n- \"structure\": Extract code definitions (classes, functions, methods) using AST parsing\n- \"search\": Search for patterns using regex\n- \"both\": Perform both structure analysis and pattern search"
          },
          "search_pattern": {
            "type": "string",
            "description": "Required when analysis_type is \"search\" or \"both\". A regex pattern to search for in the code.\nExamples:\n- \"throw|catch|error\" - Find error handling\n- \"validate|validation\" - Find validation logic\n- \"fetch|axios|api\" - Find API calls\n- \"useState|useEffect\" - Find React hooks"
          },
          "focus_areas": {
            "type": "string",
            "description": "Optional hints about what aspects of the code to focus on. This helps the AI understand the testing context.\nExamples: \"error handling, input validation\", \"authentication flow\", \"form submission\""
          }
        },
        "required": [
          "file_paths",
          "analysis_type"
        ],
        "additionalProperties": false
      }
    }
  },
  {
    "type": "function",
    "function": {
      "name": "12345670mcp0test_tool",
      "description": "test-server: A test tool",
      "strict": false,
      "parameters": {
        "type": "object",
        "properties": {},
        "required": [],
        "additionalProperties": false
      }
    }
  }
]